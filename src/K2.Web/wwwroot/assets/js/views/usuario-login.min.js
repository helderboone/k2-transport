var SnippetLogin=function(){var n=$("#m_login"),t=function(){n.removeClass("m-login--forget-password");n.addClass("m-login--signin");mUtil.animateClass(n.find(".m-login__signin")[0],"flipInX animated")},i=function(){n.removeClass("m-login--signin");n.addClass("m-login--forget-password");mUtil.animateClass(n.find(".m-login__forget-password")[0],"flipInX animated")},r=function(){$("#m_login_forget_password").click(function(n){n.preventDefault();i()});$("#m_login_forget_password_cancel").click(function(n){n.preventDefault();t()})},u=function(){$("#m_login_signin_submit").click(function(n){n.preventDefault();var i=$(this),t=$(this).closest("form");(t.validate({rules:{email:{required:!0,email:!0},password:{required:!0}}}),t.valid())&&(i.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),t.ajaxSubmit({url:"",success:function(){$.post(App.corrigirPathRota("login"),{email:$("#email").val(),senha:$("#password").val(),permanecerLogado:$("#remember").prop("checked")},function(n){if(n!=null){if(n.Tipo!=null){var t=Feedback.converter(n);t.exibirModal();return}typeof Storage!="undefined"&&$("#remember").prop("checked")&&localStorage.setItem("token",n.token);location.href=App.corrigirPathRota("viagens")}}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()}).always(function(){i.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)})}}))})},f=function(){$("#m_login_forget_password_submit").click(function(n){n.preventDefault();var r=$(this),i=$(this).closest("form");(i.validate({rules:{emailRedefinir:{required:!0,email:!0}}}),i.valid())&&(r.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),i.ajaxSubmit({url:"",success:function(){$.post(App.corrigirPathRota("redefinir-senha/"+$("#emailRedefinir").val()),function(n){var i=Feedback.converter(n);i.Tipo.Nome===Tipo.Sucesso?t():i.exibirModal()}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()}).always(function(){r.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)})}}))})};return{init:function(){if(r(),u(),f(),typeof Storage!="undefined"){var n=localStorage.getItem("token");n!=""&&n!=null&&(App.bloquear(),$.post(App.corrigirPathRota("login-por-token"),{token:n},function(n){var t=Feedback.converter(n);t.Tipo.Nome===Tipo.Sucesso?location.href=App.corrigirPathRota("viagens"):console.info(t.Mensagem)}))}}}}();jQuery(document).ready(function(){SnippetLogin.init()});