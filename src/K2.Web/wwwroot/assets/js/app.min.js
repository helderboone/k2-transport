var App,K2;const Tipo={Erro:"ERRO",Atencao:"ATENCAO",Info:"INFO",Sucesso:"SUCESSO"};class TipoFeedback{constructor(n){switch(n){case 1:this.Nome=Tipo.Info;break;case 2:this.Nome=Tipo.Atencao;break;case 3:this.Nome=Tipo.Erro;break;case 4:this.Nome=Tipo.Sucesso}}obterTitulo(){switch(this.Nome){case Tipo.Info:return"Info";case Tipo.Atencao:return"Atenção";case Tipo.Erro:return"Erro";case Tipo.Sucesso:return"Sucesso"}}obterIcone(){switch(this.Nome){case Tipo.Info:return"fa fa-info-circle";case Tipo.Atencao:return"fa fa-exclamation-triangle";case Tipo.Erro:return"fa fa-skull";case Tipo.Sucesso:return"fa fa-check-circle"}}obterTypeJqueryConfirm(){switch(this.Nome){case Tipo.Info:return"blue";case Tipo.Atencao:return"orange";case Tipo.Erro:return"red";case Tipo.Sucesso:return"green"}}obterClassCssBootstrap(){switch(this.Nome){case Tipo.Info:return"info";case Tipo.Atencao:return"warning";case Tipo.Erro:return"danger";case Tipo.Sucesso:return"success"}}}class Feedback{constructor(n,t,i,r){this.Tipo=new TipoFeedback(n);this.Mensagem=t;this.MensagemAdicional=i;this.TipoAcao=r}static converter(n){return new Feedback(n.Tipo,n.Mensagem,n.MensagemAdicional,n.TipoAcao)}exibirModal(n){let i='<div style="margin:5px;"><p style="font-weight: 500; font-size:14px;">'+this.Mensagem+"<\/p>"+(this.MensagemAdicional!=null?this.MensagemAdicional:"")+"<\/div>",t=this.TipoAcao;$.alert({icon:this.Tipo.obterIcone(),theme:"supervan",closeIcon:!1,animation:"scale",type:this.Tipo.obterTypeJqueryConfirm(),title:this.Tipo.obterTitulo(),content:i,onClose:function(){if(n!=null)n();else if(t!=null)switch(t){case 1:window.history.back();break;case 2:window.close();break;case 3:location.href=App.corrigirPathRota("inicio");break;case 4:location.reload();break;case 5:App.ocultarModal();break;case 6:location.href=App.corrigirPathRota("login")}}})}exibirNotificacao(n){$.notify({icon:"icon "+this.Tipo.obterIcone(),title:this.Tipo.obterTitulo(),message:this.Mensagem},{type:this.obterClassCssBootstrap(),z_index:9999999999,timer:this.Tipo.Nome==Tipo.Erro?12e3:5e3,mouse_over:"pause",placement:{from:"top",align:"center"},onClosed:n!=null?function(){n()}:null})}}App=function(){var n=[],t=[],i=function(n){return"/web/"+n};return{corrigirPathRota:function(n){return i(n)},bloquear:function(n){n!=null?mApp.block(n,{overlayColor:"#000000",type:"loader",state:"info",message:"Processando..."}):mApp.blockPage({overlayColor:"#000000",type:"loader",state:"info",message:"Processando...",baseZ:999999})},desbloquear:function(n){n!=null?mApp.unblock(n):mApp.unblockPage()},exibirModalPorHtml:function(i,r,u,f,e){var o=$.dialog({content:i,title:e,titleClass:"jconfirm-title-hidden",closeIcon:!1,backgroundDismiss:u==null?!1:u,columnClass:"",offsetTop:10,offsetBottom:10,onOpen:function(){this.$content.find(".btn-fechar").click(function(){o.close()});r!=null&&r()}});return f!=null&&f?t.push(o):n.push(o),o},exibirModalPorRota:function(n,t,i,r){$.get(n,function(n){App.exibirModalPorHtml(n,t,!1,i,r)}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()})},exibirConfirm:function(n,t,i,r,u){let f=$.confirm({title:"Atenção",content:n,theme:"supervan",icon:"fa fa-question-circle",type:"orange",buttons:{confirm:{text:t!=null?t:"Sim",action:function(){r!=null&&(r(),f.close())}},cancel:{text:i!=null?i:"Não",action:function(){u!=null?(u(),f.close()):f.close()}}}})},ocultarModal:function(i){$.each(n,function(n,t){t.close()});i!=null&&i&&$.each(t,function(n,t){t.close()})},ocultarModalPorTitulo:function(i){$.each(n,function(n,t){if(t.title===i){t.close();return}});$.each(t,function(n,t){if(t.title===i){t.close();return}})},abrirPopup:function(n,t,i,r,u){$.popupWindow(n,{width:i,height:t,name:r,createNew:u==null?!1:u})}}}();jQuery().dataTable&&$.extend($.fn.dataTable.defaults,{autoWidth:!0,lengthMenu:[[10,25,50],[10,25,50]],pagingType:"full_numbers",language:{info:"Exibindo _START_ de _END_ of _TOTAL_ registros",paginate:{first:"Primeiro",next:"Pr&oacute;ximo",previous:"Anterior",last:"Último",zeroRecords:"Nenhum registro encontrado."},emptyTable:"Nenhum registro encontrado.",zeroRecords:"Nenhum registro encontrado."}});K2=function(){return{alterarSenhaUsuario:function(){App.exibirModalPorRota(App.corrigirPathRota("alterar-senha"),function(){$("#frmAlterarSenha").validate({rules:{iSenhaAtual:{required:!0,minlength:2,maxlength:8},iNovaSenha:{required:!0,minlength:2,maxlength:8},iConfirmaNovaSenha:{required:!0,minlength:2,maxlength:8}},submitHandler:function(){App.bloquear($("#frmAlterarSenha"));$.post(App.corrigirPathRota("alterar-senha"),{senhaAtual:$("#iSenhaAtual").val(),senhaNova:$("#iNovaSenha").val(),confirmacaoSenhaNova:$("#iConfirmaNovaSenha").val(),enviarEmailSenhaNova:$("#iEnviarEmail").prop("checked")}).done(function(n){var t=Feedback.converter(n);t.exibirModal()}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()}).always(function(){App.desbloquear($("#frmAlterarSenha"))})}})})},alterarMeusDados:function(){},redefinirSenha:function(n){App.exibirConfirm("<b>Deseja realmente redefinir a senha de acesso?<\/b><br/><br/>Uma nova senha temporária será criada e enviada para o usuário por e-mail.","Redefinir senha","Cancelar",function(){App.bloquear();$.post(App.corrigirPathRota("redefinir-senha/"+n),function(n){var t=Feedback.converter(n);t.exibirModal()}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()})})},visualizarProprietarioCarro:function(n){App.exibirModalPorRota(App.corrigirPathRota("visualizar-proprietario/"+n),function(){$(".cpf").inputmask({mask:"999.999.999-99"});$(".celular").inputmask({mask:"(99) 99999-9999"})})},visualizarCarro:function(n){App.exibirModalPorRota(App.corrigirPathRota("visualizar-carro/"+n))},criarSelectClientes:function(n,t,i){t==null&&(t=!1);i!==null&&i!==""&&App.bloquear($(i));$.ajax({type:"GET",url:App.corrigirPathRota("obter-todos-clientes"),dataType:"json",success:function(i){var r=[];r.push({id:"",text:""});$.each(i,function(n,t){r.push({id:t.id,text:t.nome,cpf:t.cpfFormatado,celular:t.celularFormatado})});$(n).select2({allowClear:!t,placeholder:"Selecione uma cliente",data:r,escapeMarkup:function(n){return n},templateResult:function(n){return'<span class="m--font-bolder">'+n.text+"<\/span><br/>Celular: "+n.celular+"<br/>CPF: "+n.cpf}})}}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()}).always(function(){i!==null&&i!==""&&App.desbloquear($(i))})},manterCliente:function(n,t){var i=n===null||n===0;App.exibirModalPorRota(i?App.corrigirPathRota("cadastrar-cliente"):App.corrigirPathRota("alterar-cliente/"+n),function(){$("#iCpf").inputmask({mask:"999.999.999-99"});$("#iCelular").inputmask({mask:"(99) 99999-9999"});$("#iCep").inputmask({mask:"99.999-999"});$("#sEstado").select2({placeholder:"Selecione um estado"});$("#frmManterCliente").validate({rules:{iNome:{required:!0},iEmail:{required:!0,email:!0},iCpf:{required:!0},iRg:{required:!0},iCelular:{required:!0}},submitHandler:function(){var n={Id:$("#iIdCliente").val(),Nome:$("#iNome").val(),Email:$("#iEmail").val(),Cpf:$("#iCpf").val(),Rg:$("#iRg").val(),Celular:$("#iCelular").val(),Ativo:$("#cAtivo").is(":checked"),Cep:$("#iCep").val(),Endereco:$("#iEndereco").val(),Municipio:$("#iMunicipio").val(),Uf:$("#sEstado").val()};App.bloquear();$.post(App.corrigirPathRota(i?"cadastrar-cliente":"alterar-cliente"),{entrada:n}).done(function(n){var i=Feedback.converter(n);i.Tipo.Nome==Tipo.Sucesso?i.exibirModal(function(){t!=null&&t();App.ocultarModal()}):i.exibirModal()}).fail(function(n){var t=Feedback.converter(n.responseJSON);t.exibirModal()}).always(function(){App.desbloquear()})}})})},obterInfoViagem:function(n){App.exibirModalPorRota(App.corrigirPathRota("obter-info-viagem/"+n),function(){$(".cpf").inputmask({mask:"999.999.999-99"});$(".celular").inputmask({mask:"(99) 99999-9999"})})}}}();